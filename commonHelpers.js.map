{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nexport async function getImages(userQuery, pageNumber) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '?key=43036012-df3a1e6422cb462a655402953';\n  const url = BASE_URL + API_KEY;\n\n  const params = {\n    q: userQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: pageNumber,\n  };\n  \n  const response = await axios.get(url, { params });\n  return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nconst gallery = document.querySelector('.gallery');\n\nfunction cardTemplate(obj) {\n  return `<li class=\"gallery-item\">\n<div class=\"image-card\">\n<a class=\"gallery-link\" href=\"${obj.largeImageURL}\">\n<img \nloading=\"lazy\" \nclass=\"gallery-image\" \nsrc=\"${obj.webformatURL}\" \nalt=\"${obj.tags}\"/>\n\n<div class=\"data-field\">\n\n<div class=\"img-data\">\n<h4 class=\"data-title\">Likes</h4>\n<p class=\"data-value\">${obj.likes}</p>\n</div>\n\n<div class=\"img-data\">\n<h4 class=\"data-title\">Views</h4>\n<p class=\"data-value\">${obj.views}</p>\n</div>\n\n<div class=\"img-data\">\n<h4 class=\"data-title\">Comments</h4>\n<p class=\"data-value\">${obj.comments}</p>\n</div>\n\n<div class=\"img-data\">\n<h4 class=\"data-title\">Downloads</h4>\n<p class=\"data-value\">${obj.downloads}</p>\n</div>\n\n</div>\n</a>\n</div>\n</li>`;\n}\n\nfunction galleryTemplate(arr) {\n  return arr.map(cardTemplate).join('');\n}\n\nexport function renderGallery(images) {\n  const markup = galleryTemplate(images);\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.on('show.simplelightbox', function () {});\n  lightbox.refresh();\n}","import { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('input');\nconst btnLoadMore = document.querySelector('#load-more');\nform.addEventListener('submit', onFormSubmit);\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\nconst loader = document.querySelector('.loader');\n\nlet userQuery = '';\nlet pageNumber;\nlet maxPage = 0;\nconst perPage = 15;\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  pageNumber = 1;\n\n  userQuery = input.value.trim();\n\n  if (!userQuery) {\n    hideLoadMore();\n    iziToast.show({\n      title: 'Warning',\n      message: 'Please enter a search query',\n      position: 'topRight',\n      maxWidth: 400,\n    });\n    return;\n  }\n\n  try {\n    loader.style.display = 'block';\n    const data = await getImages(userQuery, pageNumber);\n    if (data.totalHits === 0) {\n      loader.style.display = 'none';\n      hideLoadMore();\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        maxWidth: 400,\n      });\n      return;\n    }\n    maxPage = Math.ceil(data.totalHits / perPage);\n    renderGallery(data.hits);\n  } catch (error) {\n    loader.style.display = 'none';\n    hideLoadMore();\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n      maxWidth: 400,\n    });\n  }\n\n  checkBtnStatus();\n  loader.style.display = 'none';\n  input.value = '';\n}\n\nasync function onLoadMoreClick() {\n  loader.style.display = 'block';\n  pageNumber += 1;\n\n  try {\n    const data = await getImages(userQuery, pageNumber);\n    renderGallery(data.hits);\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n      maxWidth: 400,\n    });\n  }\n\n  autoScroller();\n  checkBtnStatus();\n  loader.style.display = 'none';\n}\n\nfunction checkBtnStatus() {\n  if (pageNumber >= maxPage) {\n    hideLoadMore();\n    iziToast.warning({\n      title: 'Warning',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      maxWidth: 400,\n    });\n  } else {\n    showLoadMore();\n  }\n}\n\nfunction showLoadMore() {\n  btnLoadMore.style.display = 'block';\n}\nfunction hideLoadMore() {\n  btnLoadMore.style.display = 'none';\n}\nfunction autoScroller() {\n  const imageCard = document.querySelector('.image-card');\n  const cardHeight = imageCard.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["getImages","userQuery","pageNumber","url","params","axios","lightbox","SimpleLightbox","gallery","cardTemplate","obj","galleryTemplate","arr","renderGallery","images","markup","form","input","btnLoadMore","onFormSubmit","onLoadMoreClick","loader","maxPage","perPage","event","hideLoadMore","iziToast","data","checkBtnStatus","autoScroller","showLoadMore","cardHeight"],"mappings":"owBAMO,eAAeA,EAAUC,EAAWC,EAAY,CAGrD,MAAMC,EAFW,2BACD,0CAGVC,EAAS,CACb,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,EAGE,OADiB,MAAMG,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IAClB,CCnBA,IAAIE,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,KAChB,CAAC,EAED,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAaC,EAAK,CACzB,MAAO;AAAA;AAAA,gCAEuBA,EAAI,aAAa;AAAA;AAAA;AAAA;AAAA,OAI1CA,EAAI,YAAY;AAAA,OAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAMSA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKTA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKTA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOrC,CAEA,SAASC,EAAgBC,EAAK,CAC5B,OAAOA,EAAI,IAAIH,CAAY,EAAE,KAAK,EAAE,CACtC,CAEO,SAASI,EAAcC,EAAQ,CACpC,MAAMC,EAASJ,EAAgBG,CAAM,EACrCN,EAAQ,mBAAmB,YAAaO,CAAM,EAE9CT,EAAS,GAAG,sBAAuB,UAAY,CAAE,CAAA,EACjDA,EAAS,QAAO,CAClB,CCrDA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CQ,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAc,SAAS,cAAc,YAAY,EACvDF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAe,EACrD,MAAMC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIpB,EAAY,GACZC,EACAoB,EAAU,EACd,MAAMC,EAAU,GAEhB,eAAeJ,EAAaK,EAAO,CAOjC,GANAA,EAAM,eAAc,EACpBhB,EAAQ,UAAY,GACpBN,EAAa,EAEbD,EAAYgB,EAAM,MAAM,OAEpB,CAAChB,EAAW,CACdwB,IACAC,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,8BACT,SAAU,WACV,SAAU,GAChB,CAAK,EACD,MACD,CAED,GAAI,CACFL,EAAO,MAAM,QAAU,QACvB,MAAMM,EAAO,MAAM3B,EAAUC,EAAWC,CAAU,EAClD,GAAIyB,EAAK,YAAc,EAAG,CACxBN,EAAO,MAAM,QAAU,OACvBI,IACAC,EAAS,KAAK,CACZ,MAAO,OACP,QACE,2EACF,SAAU,WACV,SAAU,GAClB,CAAO,EACD,MACD,CACDJ,EAAU,KAAK,KAAKK,EAAK,UAAYJ,CAAO,EAC5CV,EAAcc,EAAK,IAAI,CACxB,MAAe,CACdN,EAAO,MAAM,QAAU,OACvBI,IACAC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kDACT,SAAU,WACV,SAAU,GAChB,CAAK,CACF,CAEDE,IACAP,EAAO,MAAM,QAAU,OACvBJ,EAAM,MAAQ,EAChB,CAEA,eAAeG,GAAkB,CAC/BC,EAAO,MAAM,QAAU,QACvBnB,GAAc,EAEd,GAAI,CACF,MAAMyB,EAAO,MAAM3B,EAAUC,EAAWC,CAAU,EAClDW,EAAcc,EAAK,IAAI,CACxB,MAAe,CACdN,EAAO,MAAM,QAAU,OACvBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kDACT,SAAU,WACV,SAAU,GAChB,CAAK,CACF,CAEDG,IACAD,IACAP,EAAO,MAAM,QAAU,MACzB,CAEA,SAASO,GAAiB,CACpB1B,GAAcoB,GAChBG,IACAC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,6DACT,SAAU,WACV,SAAU,GAChB,CAAK,GAEDI,GAEJ,CAEA,SAASA,GAAe,CACtBZ,EAAY,MAAM,QAAU,OAC9B,CACA,SAASO,GAAe,CACtBP,EAAY,MAAM,QAAU,MAC9B,CACA,SAASW,GAAe,CAEtB,MAAME,EADY,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}